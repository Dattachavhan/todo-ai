<div class="w-100 h-screen bg-white border-l border-gray-200 flex flex-col shadow-2xl z-10">
  <div class="p-5 border-b border-gray-100 bg-gray-50">
    <h2 class="text-lg font-bold text-gray-800 flex items-center gap-2">
      <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> AI Assistant
    </h2>
  </div>

  <div class="flex-1 overflow-y-auto p-5 space-y-4 bg-white">
    @for (msg of chatMessages(); track msg) {
      <div class="flex" [ngClass]="msg.role === 'user' ? 'justify-end' : 'justify-start'">
        <div
          class="max-w-[85%] px-4 py-2.5 rounded-2xl text-sm shadow-sm"
          [ngClass]="
            msg.role === 'user'
              ? 'bg-blue-600 text-white rounded-br-none'
              : 'bg-gray-100 text-gray-800 rounded-bl-none'
          "
        >
          <div [innerHTML]="msg.text | markdown" class="markdown-body"></div>
        </div>
      </div>
    } @empty {
      <div class="text-center text-gray-400 text-sm mt-10">
        Ask me to add tasks, update lists, or summarize your day!
      </div>
    }
  </div>

  <div class="p-4 border-t border-gray-100 bg-gray-50">
    <div class="flex gap-2 relative">
      <input
        type="text"
        [(ngModel)]="chatInput"
        (keyup.enter)="sendChatMessage()"
        class="flex-1 px-4 py-2.5 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
        placeholder="Message Gemini..."
      />
      <button
        (click)="sendChatMessage()"
        class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl transition-colors shadow-sm"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          class="w-5 h-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"
          />
        </svg>
      </button>
    </div>
  </div>
</div>
